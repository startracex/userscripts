// ==UserScript==
// @version            0.2.1
// @name               npmjs: more install commands
// @name:zh-CN         npmjs: 更多安装命令
// @description        Display more install commands on npmjs.
// @description:zh-CN  为 npmjs 网站添加更多安装命令.
// @match              https://www.npmjs.com/
// @match              https://www.npmjs.com/package/*
// @author             startracex
// @license            MIT
// @updateURL          https://raw.githubusercontent.com/startracex/userscripts/release/npmjs.min.js
// @downloadURL        https://raw.githubusercontent.com/startracex/userscripts/release/npmjs.min.js
// @namespace          https://github.com/startracex
// @homepage           https://github.com/startracex/userscripts/blob/main/packages/npmjs
// @homepageURL        https://github.com/startracex/userscripts/blob/main/packages/npmjs/README.md
// @supportURL         https://github.com/startracex/userscripts/issues
// ==/UserScript==
(function(){"use strict";let e=document.querySelector(`#main`),t=[e=>e,e=>e.replace(`npm`,`pnpm`),e=>e.replace(`npm i`,`yarn add`),e=>e.replace(`npm i`,`bun add`),e=>e.replace(`npm i `,`deno add npm:`),e=>e.replace(`npm i `,`npx jsr add npm:`)],n=()=>{let n=e.querySelector(`:scope > div > :nth-child(4) > h3 + div`);if(!n)return;let r=t.map(e=>{let t=n.cloneNode(!0).cloneNode(!0),r=t.querySelector(`code`);return r.textContent=e(r.textContent),t.querySelector(`button`).addEventListener(`click`,()=>{navigator.clipboard.writeText(r.textContent).then(()=>{let e=document.createElement(`div`);e.className=`fixed top-0 pa3 ph5-ns tl z-999 w-100 flex flex-row justify-between`,e.textContent=`copied to clipboard`,e.style.borderBottom=`1px solid`,e.style.backgroundColor=`var(--color-bg-success)`,e.style.borderColor=`var(--color-border-success)`,e.style.color=`var(--color-fg-success)`,document.body.appendChild(e),setTimeout(()=>{e.remove()},2e3)})}),t});n.replaceWith(...r)};e&&(n(),new MutationObserver(n).observe(e,{childList:!0}))})();
